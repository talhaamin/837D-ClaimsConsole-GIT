function addML(){var n=Math.floor(Math.random()*1e3),u="divMLbodyRows"+n,f="divMLfooterRows"+n,t=$("<div><\/div>").attr("id",u),r=$("<div><\/div>").attr("id",f),i;return t.html($.trim($("#divMLbodyRows0").html())),i=customColor(),t.css("background-color",i),r.css("background-color",i),$("#divMLbody").append(t),$("#divMLbodyRows"+n).find("input[type='text']").each(function(){var t=$(this).attr("id")+n;$(this).attr("id",t)}),$("#divMLfooter").append(r),initPrototypeLoopSentence("div",n,"ML","<ns0:MAILADDRESS_ROW>"),generatePrototypeLoopSentence("div",n,"ML","<ns0:MAILADDRESS_ROW>"),n}function addOC(){var n=Math.floor(Math.random()*1e3),u="divOCbodyRows"+n,f="divOCfooterRows"+n,t=$("<div><\/div>").attr("id",u),r=$("<div><\/div>").attr("id",f),i;return t.html($.trim($("#divOCbodyRows0").html())),i=customColor(),t.css("background-color",i),r.css("background-color",i),$("#divOCbody").append(t),$("#divOCbodyRows"+n).find("input[type='text']").each(function(){var t=$(this).attr("id")+n;$(this).attr("id",t)}),$("#divOCfooter").append(r),initPrototypeLoopSentence("div",n,"OC","<ns0:OC_ROW>"),generatePrototypeLoopSentence("div",n,"OC","<ns0:OC_ROW>"),n}function customColor(){var n=Math.floor(Math.random()*128)+128,t=Math.floor(Math.random()*128)+128,i=Math.floor(Math.random()*128)+128;return"rgb("+n+", "+t+", "+i+")"}function fillDataFromXML(){var t=$("#hdXML").val().replaceAll("ns0:",""),n=$.parseXML(t),r=$(n),i=$(t).find("Claim");i.each(function(){var u,r,f,t,e,i;$("#CLAIMNUMBER").val($(n).find("CLAIMNUMBER").text());$("#CLAIMSEQUENCE").val($(n).find("CLAIMSEQUENCE").text());$("#FIRSTDOS").val($(n).find("FIRSTDOS").text());$("#GROUPNUMBER").val($(n).find("GROUPNUMBER").text());$("#DIVISIONNUMBER").val($(n).find("DIVISIONNUMBER").text());$("#PAYMENTORDER").val($(n).find("PAYMENTORDER").text());$("#PREAUTHSTATUS").val($(n).find("PREAUTHSTATUS").text());$("#RELATIONSHIPCODE").val($(n).find("RELATIONSHIPCODE").text());$("#TOTALOCPAYMENT").val($(n).find("TOTALOCPAYMENT").text());$("#TOTALPATIENTPAYMENT").val($(n).find("TOTALPATIENTPAYMENT").text());$("#TOTALSUBMITAMOUNT").val($(n).find("TOTALSUBMITAMOUNT").text());$("#TOTALPLANPAYMENT").val($(n).find("TOTALPLANPAYMENT").text());$("#PAYMENTDESTINATION").val($(n).find("PAYMENTDESTINATION").text());$("#CHECKDATE").val($(n).find("CHECKDATE").text());$("#SUBSCRIBERPERSONNUMBER").val($(n).find("SUBSCRIBERPERSONNUMBER").text());$("#PATIENTPERSONNUMBER").val($(n).find("PATIENTPERSONNUMBER").text());$("#CPINVOICENUMBER").val($(n).find("CPINVOICENUMBER").text());$("#PROVIDERFIRSTNAME").val($(n).find("PROVIDERFIRSTNAME").text());$("#PROVIDERMIDDLEINITIAL").val($(n).find("PROVIDERMIDDLEINITIAL").text());$("#PROVIDERLASTNAME").val($(n).find("PROVIDERLASTNAME").text());$("#PROVIDERNAMESUFFIX").val($(n).find("PROVIDERNAMESUFFIX").text());$("#PROVIDERLICENSENUMBER").val($(n).find("PROVIDERLICENSENUMBER").text());$("#PROVIDERNPINUMBER").val($(n).find("PROVIDERNPINUMBER").text());$("#PROVIDEROPSNUMBER").val($(n).find("PROVIDEROPSNUMBER").text());$("#PROVIDERADDRESSLINE1").val($(n).find("PROVIDERADDRESSLINE1").text());$("#PROVIDERADDRESSLINE2").val($(n).find("PROVIDERADDRESSLINE2").text());$("#PROVIDERADDRESSCITY").val($(n).find("PROVIDERADDRESSCITY").text());$("#PROVIDERADDRESSSTATE").val($(n).find("PROVIDERADDRESSSTATE").text());$("#PROVIDERADDRESSZIP").val($(n).find("PROVIDERADDRESSZIP").text());$("#PROVIDERPAYTOADDRESSLINE1").val($(n).find("PROVIDERPAYTOADDRESSLINE1").text());$("#PROVIDERPAYTOADDRESSLINE2").val($(n).find("PROVIDERPAYTOADDRESSLINE2").text());$("#PROVIDERPAYTOCITY").val($(n).find("PROVIDERPAYTOCITY").text());$("#PROVIDERPAYTOSTATE").val($(n).find("PROVIDERPAYTOSTATE").text());$("#PROVIDERPAYTOZIP").val($(n).find("PROVIDERPAYTOZIP").text());$("#PROVIDERPAYEENAME").val($(n).find("PROVIDERPAYEENAME").text());$("#PROVIDERTRAXFILINGID").val($(n).find("PROVIDERTRAXFILINGID").text());$("#EXTERNALID").val($(n).find("EXTERNALID").text());$("#SUBSCRIBERCLIENTEXTKEY").val($(n).find("SUBSCRIBERCLIENTEXTKEY").text());$("#SUBSCRIBERFIRSTNAME").val($(n).find("SUBSCRIBERFIRSTNAME").text());$("#SUBSCRIBERMIDDLENAME").val($(n).find("SUBSCRIBERMIDDLENAME").text());$("#SUBSCRIBERLASTNAME").val($(n).find("SUBSCRIBERLASTNAME").text());$("#SUBSCRIBERSEX").val($(n).find("SUBSCRIBERSEX").text());$("#SUBSCRIBERDATEOFBIRTH").val($(n).find("SUBSCRIBERDATEOFBIRTH").text());u=$(n).find("OC_ROW");r=0;u.each(function(){r===0?($("#OCID").val($(this).find("OCID").text()),$("#OCRELATIONSHIPTOSUBSCRIBER").val($(this).find("OCRELATIONSHIPTOSUBSCRIBER").text()),$("#OCSUBSCRIBERFIRSTNAME").val($(this).find("OCSUBSCRIBERFIRSTNAME").text()),$("#OCSUBSCRIBERLASTNAME").val($(this).find("OCSUBSCRIBERLASTNAME").text()),$("#OCNAME").val($(this).find("OCNAME").text())):(r=addOC(),$("#OCID"+r).val($(this).find("OCID").text()),$("#OCRELATIONSHIPTOSUBSCRIBER"+r).val($(this).find("OCRELATIONSHIPTOSUBSCRIBER").text()),$("#OCSUBSCRIBERFIRSTNAME"+r).val($(this).find("OCSUBSCRIBERFIRSTNAME").text()),$("#OCSUBSCRIBERLASTNAME"+r).val($(this).find("OCSUBSCRIBERLASTNAME").text()),$("#OCNAME"+r).val($(this).find("OCNAME").text()),initPrototypeLoopSentence("div",r,"OC","<ns0:OC_ROW>"));r+=1});$("#PATIENTCLIENTEXTKEY").val($(n).find("PATIENTCLIENTEXTKEY").text());$("#PATIENTFIRSTNAME").val($(n).find("PATIENTFIRSTNAME").text());$("#PATIENTMIDDLENAME").val($(n).find("PATIENTMIDDLENAME").text());$("#PATIENTLASTNAME").val($(n).find("PATIENTLASTNAME").text());$("#PATIENTSEX").val($(n).find("PATIENTSEX").text());$("#PATIENTDATEOFBIRTH").val($(n).find("PATIENTDATEOFBIRTH").text());f=$(n).find("LINE_ROW");t=0;f.each(function(){t===0?($("#LINENUMBER").val($(this).find("LINENUMBER").text()),$("#PROCESSEDLINENUMBER").val($(this).find("PROCESSEDLINENUMBER").text()),$("#BILLEDADAPROCEDURE").val($(this).find("BILLEDADAPROCEDURE").text()),$("#CHARGEAMOUNT").val($(this).find("CHARGEAMOUNT").text()),$("#APPROVALAMOUNT").val($(this).find("APPROVALAMOUNT").text()),$("#PATIENTPAYMENT").val($(this).find("PATIENTPAYMENT").text()),$("#NETPAYMENT").val($(this).find("NETPAYMENT").text()),$("#ADJUSTMENTINDICATOR").val($(this).find("ADJUSTMENTINDICATOR").text()),$("#OTHERPLANPAYMENT").val($(this).find("OTHERPLANPAYMENT").text()),$("#BILLEDTOOTHNUMBER").val($(this).find("BILLEDTOOTHNUMBER").text()),$("#BILLEDTOOTHSURFACE").val($(this).find("BILLEDTOOTHSURFACE").text())):(t=addSL(),$("#LINENUMBER"+t).val($(this).find("LINENUMBER").text()),$("#PROCESSEDLINENUMBER"+t).val($(this).find("PROCESSEDLINENUMBER").text()),$("#BILLEDADAPROCEDURE"+t).val($(this).find("BILLEDADAPROCEDURE").text()),$("#CHARGEAMOUNT"+t).val($(this).find("CHARGEAMOUNT").text()),$("#APPROVALAMOUNT"+t).val($(this).find("APPROVALAMOUNT").text()),$("#PATIENTPAYMENT"+t).val($(this).find("PATIENTPAYMENT").text()),$("#NETPAYMENT"+t).val($(this).find("NETPAYMENT").text()),$("#ADJUSTMENTINDICATOR"+t).val($(this).find("ADJUSTMENTINDICATOR").text()),$("#OTHERPLANPAYMENT"+t).val($(this).find("OTHERPLANPAYMENT").text()),$("#BILLEDTOOTHNUMBER"+t).val($(this).find("BILLEDTOOTHNUMBER").text()),$("#BILLEDTOOTHSURFACE"+t).val($(this).find("BILLEDTOOTHSURFACE").text()),initPrototypeLoopSentence("div",t,"SL","<ns0:LINE_ROW>"));t+=1});e=$(n).find("MAILADDRESS_ROW");i=0;e.each(function(){i===0?($("#ADDRESSLINE1").val($(this).find("ADDRESSLINE1").text()),$("#ADDRESSLINE2").val($(this).find("ADDRESSLINE2").text()),$("#ADDRESSCITY").val($(this).find("ADDRESSCITY").text()),$("#ADDRESSSTATE").val($(this).find("ADDRESSSTATE").text()),$("#ADDRESSZIP").val($(this).find("ADDRESSZIP").text()),$("#ADDRESSCOUNTRY").val($(this).find("ADDRESSCOUNTRY").text())):(i=addML(),$("#ADDRESSLINE1"+i).val($(this).find("ADDRESSLINE1").text()),$("#ADDRESSLINE2"+i).val($(this).find("ADDRESSLINE2").text()),$("#ADDRESSCITY"+i).val($(this).find("ADDRESSCITY").text()),$("#ADDRESSSTATE"+i).val($(this).find("ADDRESSSTATE").text()),$("#ADDRESSZIP"+i).val($(this).find("ADDRESSZIP").text()),$("#ADDRESSCOUNTRY"+i).val($(this).find("ADDRESSCOUNTRY").text()),initPrototypeLoopSentence("div",i,"ML","<ns0:MAILADDRESS_ROW>"));i+=1});$("#COMMENTS").val($(n).find("COMMENTS").text())})}function renderLoopXML(n,t,i,r){var u=vkbeautify.xml(n);$("#"+t+i+"footerRows"+r).text(u)}function renderXML(n,t,i){var r=vkbeautify.xml(n);$("#"+t+i+"footer").text(r)}function initPrototypeLoopSentence(n,t,i,r){var u=r,f="#"+n+i+"bodyRows"+t+" input[type='text']";$(f).each(function(){var n=$(this);u+=n.attr("title").replace("<","<ns0:")+n.val()+n.attr("title").replace("<","<\/ns0:")});u+=r.replace("<","<\/");renderLoopXML(u,n,i,t)}function generatePrototypeLoopSentence(n,t,i,r){var u,f="#"+n+i+"bodyRows"+t+" input[type='text']";$(f).on("keyup",function(){u=r;$(f).each(function(){var n=$(this);u+=n.attr("title").replace("<","<ns0:")+n.val()+n.attr("title").replace("<","<\/ns0:")});u+=r.replace("<","<\/");renderLoopXML(u,n,i,t)})}function initPrototypeSentence(n,t,i){var r="",u="#"+n+i+"body input[type='text']";$(u).each(function(){var n=$(this);r+=n.attr("title").replace("<","<ns0:")+n.val()+n.attr("title").replace("<","<\/ns0:")});renderXML(r,n,i)}function generatePrototypeSentence(n,t,i){var r,u="#"+n+i+"body input[type='text']";$(u).on("keyup",function(){r="";$(u).each(function(){var n=$(this);r+=n.attr("title").replace("<","<ns0:")+n.val()+n.attr("title").replace("<","<\/ns0:")});renderXML(r,n,i)})}function addSL(){var n=Math.floor(Math.random()*1e3),u="divSLbodyRows"+n,f="divSLfooterRows"+n,t=$("<div><\/div>").attr("id",u),r=$("<div><\/div>").attr("id",f),i;return t.html($.trim($("#divSLbodyRows0").html())),i=customColor(),t.css("background-color",i),r.css("background-color",i),$("#divSLbody").append(t),$("#divSLbodyRows"+n).find("input[type='text']").each(function(){var t=$(this).attr("id")+n;$(this).attr("id",t)}),$("#divSLfooter").append(r),initPrototypeLoopSentence("div",n,"SL","<ns0:LINE_ROW>"),generatePrototypeLoopSentence("div",n,"SL","<ns0:LINE_ROW>"),n}$(document).ready(function(){function t(){var t='<?xml version="1.0"?><ns0:Invoice'+$.trim('xmlns:ns0="SkyGen_837D.Schema">')+"<ns0:Claim>"+$.trim($("#divCMfooter").text())+"<ns0:OC>"+$.trim($("#divOCfooter").text())+"<\/ns0:OC>"+$.trim($("#divPATIfooter").text())+"<ns0:LINE>"+$.trim($("#divSLfooter").text())+"<\/ns0:LINE><ns0:MAILADDRESS>"+$.trim($("#divMLfooter").text())+"<\/ns0:MAILADDRESS>"+$.trim($("#divCfooter").text())+"<\/ns0:Claim><\/ns0:Invoice>";n.setValue(vkbeautify.xml($.trim(t)));$("#hdXML").val(vkbeautify.xml($.trim(t)));n.focus();$("#xmlPrototype").focus()}var n=CodeMirror.fromTextArea(document.getElementById("xmlPrototype"),{mode:"xml",theme:"monokai",lineNumbers:!1}),i,r;n.focus();$("#xmlPrototype").focus();document.getElementById("saveButton").addEventListener("click",function(){t()});document.getElementById("downloadButton").addEventListener("click",function(){t();var u=$.trim(n.getValue()),f=new Blob([u],{type:"text/xml"}),r=window.URL.createObjectURL(f),i=document.createElement("a");i.href=r;i.download="downloaded.xml";i.click();window.URL.revokeObjectURL(r);i.remove()});i="";r=!0;initPrototypeSentence("div","CM","CM");generatePrototypeSentence("div","CM","CM");initPrototypeLoopSentence("div",0,"OC","<ns0:OC_ROW>");generatePrototypeLoopSentence("div",0,"OC","<ns0:OC_ROW>");initPrototypeSentence("div","PATI","PATI");generatePrototypeSentence("div","PATI","PATI");initPrototypeLoopSentence("div",0,"SL","<ns0:LINE_ROW>");generatePrototypeLoopSentence("div",0,"SL","<ns0:LINE_ROW>");initPrototypeLoopSentence("div",0,"ML","<ns0:MAILADDRESS_ROW>");generatePrototypeLoopSentence("div",0,"ML","<ns0:MAILADDRESS_ROW>");initPrototypeSentence("div","C","C");generatePrototypeSentence("div","C","C");$("#addSL").click(function(){addSL()});$("#addOC").click(function(){addOC()});$("#addMailAddress").click(function(){addML()});$("#custom-tabs-three-messages-tab").click(function(){t()})});